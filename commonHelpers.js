import{g as b,m as p,a as B,b as O,c as L,d as x}from"./assets/applebooks@2x-9bf15c24.js";const v="https://books-backend.p.goit.global/books",M={list:"category-list",top:"top-books",category:"category?category="};async function A(e,t=""){try{const o=await fetch(`${v}/${e}${t}`),a=await o.json();return console.log(`data retrieving was succesfull: ${o.status} - ${o.statusText}`),a}catch(o){console.log(`An error occurred: ${o.message}`),alert("An error occurred")}}async function C(e){try{const t=await fetch(`${v}/${e}`),o=await t.json();return console.log(`data retrieving was succesfull: ${t.status} - ${t.statusText}`),o}catch(t){console.log(`An error occurred: ${t.message}`),alert("An error occurred")}}const s={API_OPTIONS:M,fetchBookList:A,fetchBookById:C},N=document.querySelector(".ctg-list");s.fetchBookList(s.API_OPTIONS.list).then(e=>{const t=e.map(({list_name:o})=>`<li class="ctg-item js-ctg-item " data-ctg-name = ${o}>${o}
          </li>`).join("");N.insertAdjacentHTML("beforeend",t)});const l=b();s.fetchBookList(s.API_OPTIONS.top).then(p.renderTopBooks);function S(e){[...l.ctgList.children].forEach(t=>t.classList.remove("ctg-item-active")),l.ctgList.contains(e.target)?e.target.classList.add("ctg-item-active"):[...l.ctgList.children].find(o=>o.textContent.trim()===e.target.dataset.category).classList.add("ctg-item-active")}function P(e){const t=e.target.childNodes[0].data;S(e),t!=="All categories"?s.fetchBookList(s.API_OPTIONS.category,t).then(p.renderCategoryBooks):s.fetchBookList(s.API_OPTIONS.top).then(p.renderTopBooks)}function _(e){if(!e.target.classList.contains("top-books-button"))return;const t=e.target.dataset.category;S(e),s.fetchBookList(s.API_OPTIONS.category,t).then(p.renderCategoryBooks)}l.ctgList.addEventListener("click",P);l.bookCollectionWrapper.addEventListener("click",_);const J=b(),u=document.getElementById("bookModal"),f=document.getElementById("bookModalTitle"),z=document.getElementById("bookModalBody"),r=document.getElementById("addToShoppingList"),j=document.querySelector(".modal-close");let i=[];function R(e){s.fetchBookById(e).then(t=>{f.innerText=t.title,f.dataset.bookId=e,z.innerHTML=`
      <img src="${t.book_image}" alt="${t.title}" class="book-modal-img"/>
      <div class="book-modal-details">
        <h2 class="book-modal-title">${t.title}</h2>
        <h3 class="book-modal-author">${t.author}</h3>
        <p class="book-modal-desc">${t.description}</p>
        <ul class="icon-book-modal-list">
          <li>
            <a href="${t.buy_links[0].url}" rel="noopener noreferrer nofollow" target="_blank">
              <img class="icon-book-modal-amazon" srcset="${B} 1x, ${O} 2x" src="${B}" alt="Amazon" loading="lazy"/>
            </a>
          </li>
          <li>
            <a href="${t.buy_links[1].url}" rel="noopener noreferrer nofollow" target="_blank">
              <img class="icon-book-modal-ibooks" srcset="${L} 1x, ${x} 2x" src="${L}" alt="Apple books" loading="lazy"/>
            </a>
          </li>
        </ul>
      </div>
    `,i.includes(e)?r.innerText="Remove from the shopping list":r.innerText="Add to shopping list",u.classList.add("show"),document.body.style.overflow="hidden"})}function y(){u.classList.remove("show"),document.body.style.overflow=""}function D(e){const t=f.dataset.bookId;if(!i.includes(t))i.push(t),s.fetchBookById(t).then(o=>{const a=JSON.parse(localStorage.getItem("savedBooks"))||[];a.push(o),localStorage.setItem("savedBooks",JSON.stringify(a))}),localStorage.setItem("shoppingList",JSON.stringify(i)),r.innerText="Remove from the shopping list";else{const o=i.indexOf(t);i.splice(o,1);const n=(JSON.parse(localStorage.getItem("savedBooks"))||[]).filter(h=>h.id!==t);localStorage.setItem("savedBooks",JSON.stringify(n)),localStorage.setItem("shoppingList",JSON.stringify(i)),r.innerText="Add to shopping list"}}r.addEventListener("click",()=>{f.dataset.bookId,D()});u.addEventListener("click",e=>{e.target===u&&y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});J.bookCollectionWrapper.addEventListener("click",e=>{const t=e.target.closest(".book-link");if(t){e.preventDefault();const o=t.dataset.id;R(o)}});const I=localStorage.getItem("shoppingList");I&&(i=JSON.parse(I));j.addEventListener("click",()=>{localStorage.removeItem("currentBook"),y()});document.addEventListener("DOMContentLoaded",function(){document.getElementById("signupBtn").addEventListener("click",o);const t=document.createElement("div");t.style.position="fixed",t.style.top="20px",t.style.right="20px",t.style.background="red",t.style.color="white",t.style.padding="15px",t.style.display="none",t.style.zIndex="1",document.body.appendChild(t);function o(){fetch("partials/registration.html").then(n=>n.text()).then(n=>{const h=document.getElementById("registrationModalContainer");h.innerHTML=n;const w=document.getElementById("registrationForm"),T=document.querySelector(".close-icon");w.addEventListener("submit",function($){$.preventDefault();const d=document.getElementById("name").value,g=document.getElementById("email").value,m=document.getElementById("password").value;if(d&&g&&m){console.log("User data:",{name:d,email:g,password:m});const c={name:d,email:g,password:m};localStorage.setItem("userData",JSON.stringify(c)),a()}else{const c=[];d||c.push("Name"),g||c.push("Email"),m||c.push("Password"),t.textContent=`Please fill in the following fields: ${c.join(", ")}`,t.style.display="block",setTimeout(function(){t.style.display="none"},1e4)}}),T.addEventListener("click",function(){t.style.display="none",a()})}).catch(n=>console.error("Error loading registration content:",n))}function a(){const n=document.getElementById("registrationModalContainer");n.innerHTML=""}});const k=document.querySelector(".back-to-top");window.addEventListener("scroll",H);k.addEventListener("click",E);function H(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?k.classList.add("back-to-top--show"):k.classList.remove("back-to-top--show")}function E(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(E,0))}
//# sourceMappingURL=commonHelpers.js.map
