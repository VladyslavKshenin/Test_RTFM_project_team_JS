import{g as L,m as r,a as u,b as T,c as y,d as v}from"./assets/applebooks@2x-32274212.js";const B="https://books-backend.p.goit.global/books",w={list:"category-list",top:"top-books",category:"category?category="};async function x(e,t=""){try{return await(await fetch(`${B}/${e}${t}`)).json()}catch{alert("An error occurred")}}async function $(e){try{return await(await fetch(`${B}/${e}`)).json()}catch{alert("An error occurred")}}const s={API_OPTIONS:w,fetchBookList:x,fetchBookById:$},O=document.querySelector(".ctg-list");s.fetchBookList(s.API_OPTIONS.list).then(e=>{const t=e.map(({list_name:o})=>`<li class="ctg-item js-ctg-item " data-ctg-name = ${o}>${o}
          </li>`).join("");O.insertAdjacentHTML("beforeend",t)});const i=L();s.fetchBookList(s.API_OPTIONS.top).then(r.renderTopBooks);function b(e){[...i.ctgList.children].forEach(t=>t.classList.remove("ctg-item-active")),i.ctgList.contains(e.target)?e.target.classList.add("ctg-item-active"):[...i.ctgList.children].find(o=>o.textContent.trim()===e.target.dataset.category).classList.add("ctg-item-active")}function C(e){const t=e.target.childNodes[0].data;b(e),t!=="All categories"?s.fetchBookList(s.API_OPTIONS.category,t).then(r.renderCategoryBooks):s.fetchBookList(s.API_OPTIONS.top).then(r.renderTopBooks)}function M(e){if(!e.target.classList.contains("top-books-button"))return;const t=e.target.dataset.category;b(e),s.fetchBookList(s.API_OPTIONS.category,t).then(r.renderCategoryBooks)}i.ctgList.addEventListener("click",C);i.bookCollectionWrapper.addEventListener("click",M);const A=L(),d=document.getElementById("bookModal"),p=document.getElementById("bookModalTitle"),_=document.getElementById("bookModalBody"),a=document.getElementById("addToShoppingList"),P=document.querySelector(".modal-close"),g=document.getElementById("modalFooterText");let n=[],l=[],I={};const N="The Duke of Sussex details his struggles with the royal family, loss of his mother, service in the British Army and marriage to Meghan Markle. Read by the author. 15 hours, 39 minutes unabridged.";function z(e){s.fetchBookById(e).then(t=>{p.innerText=t.title,t.description||(t.description=N),I={book_image:t.book_image,title:t.title,author:t.author,description:t.description,amazonLinks:t.buy_links[0].url,appleLinks:t.buy_links[1].url},p.dataset.bookId=e,_.innerHTML=`<img src="${t.book_image}" alt="${t.title}" class="book-modal-img"/>
            <div class="book-modal-details">
                <h2 class="book-modal-title">${t.title}</h2>
                <h3 class="book-modal-author">${t.author}</h3>
                <p class="book-modal-desc">${t.description}</p>
                <ul class="icon-book-modal-list">
                    <li>
                        <a href="${t.buy_links[0].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-amazon" srcset="${u} 1x, ${T} 2x" src="${u}" alt="Amazon" loading="lazy"/>
                        </a>
                    </li>
                    <li>
                        <a href="${t.buy_links[1].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-ibooks" srcset="${y} 1x, ${v} 2x" src="${y}" alt="Apple books" loading="lazy"/>
                        </a>
                    </li>
                </ul>
            </div>
    `,n.includes(e)?(a.innerText="Remove from the shopping list",g.style.display="block"):(a.innerText="Add to shopping list",g.style.display="none"),d.classList.add("show"),document.body.style.overflow="hidden"})}function h(){d.classList.remove("show"),document.body.style.overflow=""}function R(e){if(!e){console.error("Invalid bookId:",e);return}const t=n.indexOf(e);t===-1?(n.push(e),l.push(I)):(n.splice(t,1),l.splice(t,1)),localStorage.setItem("shoppingList",JSON.stringify(n)),localStorage.setItem("shoppingCard",JSON.stringify(l)),t===-1?(a.innerText="Remove from the shopping list",g.style.display="block"):(a.innerText="Add to shopping list",g.style.display="none")}a.addEventListener("click",()=>{const e=p.dataset.bookId;R(e)});d.addEventListener("click",e=>{e.target===d&&h()});document.addEventListener("keydown",e=>{e.key==="Escape"&&h()});A.bookCollectionWrapper.addEventListener("click",e=>{const t=e.target.closest(".book-link");if(t){e.preventDefault();const o=t.dataset.id;z(o)}});const f=localStorage.getItem("shoppingList"),k=localStorage.getItem("shoppingCard");f&&(n=JSON.parse(f));k&&(l=JSON.parse(k));P.addEventListener("click",h);document.addEventListener("DOMContentLoaded",function(){document.getElementById("signupBtn").addEventListener("click",o);const t=document.createElement("div");t.style.position="fixed",t.style.top="20px",t.style.right="20px",t.style.background="red",t.style.color="white",t.style.padding="15px",t.style.display="none",t.style.zIndex="1",document.body.appendChild(t);function o(){fetch("/partials/registration.html").then(c=>c.text()).then(c=>{const S=document.getElementById("registrationModalContainer");S.innerHTML=c,document.getElementById("registrationForm"),document.querySelector(".close-icon").addEventListener("click",function(){t.style.display="none",closeRegistrationModal()})})}});const m=document.querySelector(".back-to-top");window.addEventListener("scroll",j);m.addEventListener("click",E);function j(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?m.classList.add("back-to-top--show"):m.classList.remove("back-to-top--show")}function E(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(E,0))}
//# sourceMappingURL=commonHelpers.js.map
