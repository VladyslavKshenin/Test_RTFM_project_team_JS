import{g as w,m as d,a as b,b as z,c as B,d as D}from"./assets/applebooks@2x-32274212.js";import{i as R,g as F,a as H,c as J,s as q,d as W}from"./assets/vendor-67f04ea3.js";const S="https://books-backend.p.goit.global/books",Y={list:"category-list",top:"top-books",category:"category?category="};async function U(t,e=""){try{return await(await fetch(`${S}/${t}${e}`)).json()}catch{alert("An error occurred")}}async function K(t){try{return await(await fetch(`${S}/${t}`)).json()}catch{alert("An error occurred")}}const s={API_OPTIONS:Y,fetchBookList:U,fetchBookById:K},G=document.querySelector(".ctg-list");s.fetchBookList(s.API_OPTIONS.list).then(t=>{const e=t.map(({list_name:o})=>`<li class="ctg-item js-ctg-item " data-ctg-name = ${o}>${o}
          </li>`).join("");G.insertAdjacentHTML("beforeend",e)});const i=w();s.fetchBookList(s.API_OPTIONS.top).then(d.renderTopBooks);function v(t){[...i.ctgList.children].forEach(e=>e.classList.remove("ctg-item-active")),i.ctgList.contains(t.target)?t.target.classList.add("ctg-item-active"):[...i.ctgList.children].find(o=>o.textContent.trim()===t.target.dataset.category).classList.add("ctg-item-active")}function Q(t){const e=t.target.childNodes[0].data;v(t),e!=="All categories"?s.fetchBookList(s.API_OPTIONS.category,e).then(d.renderCategoryBooks):s.fetchBookList(s.API_OPTIONS.top).then(d.renderTopBooks)}function Z(t){if(!t.target.classList.contains("top-books-button"))return;const e=t.target.dataset.category;v(t),s.fetchBookList(s.API_OPTIONS.category,e).then(d.renderCategoryBooks)}i.ctgList.addEventListener("click",Q);i.bookCollectionWrapper.addEventListener("click",Z);const V=w(),p=document.getElementById("bookModal"),m=document.getElementById("bookModalTitle"),X=document.getElementById("bookModalBody"),a=document.getElementById("addToShoppingList"),ee=document.querySelector(".modal-close"),g=document.getElementById("modalFooterText");let n=[],l=[],T={};const te="The Duke of Sussex details his struggles with the royal family, loss of his mother, service in the British Army and marriage to Meghan Markle. Read by the author. 15 hours, 39 minutes unabridged.";function oe(t){s.fetchBookById(t).then(e=>{m.innerText=e.title,e.description||(e.description=te),T={book_image:e.book_image,title:e.title,author:e.author,description:e.description,amazonLinks:e.buy_links[0].url,appleLinks:e.buy_links[1].url},m.dataset.bookId=t,X.innerHTML=`<img src="${e.book_image}" alt="${e.title}" class="book-modal-img"/>
            <div class="book-modal-details">
                <h2 class="book-modal-title">${e.title}</h2>
                <h3 class="book-modal-author">${e.author}</h3>
                <p class="book-modal-desc">${e.description}</p>
                <ul class="icon-book-modal-list">
                    <li>
                        <a href="${e.buy_links[0].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-amazon" srcset="${b} 1x, ${z} 2x" src="${b}" alt="Amazon" loading="lazy"/>
                        </a>
                    </li>
                    <li>
                        <a href="${e.buy_links[1].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-ibooks" srcset="${B} 1x, ${D} 2x" src="${B}" alt="Apple books" loading="lazy"/>
                        </a>
                    </li>
                </ul>
            </div>
    `,n.includes(t)?(a.innerText="Remove from the shopping list",g.style.display="block"):(a.innerText="Add to shopping list",g.style.display="none"),p.classList.add("show"),document.body.style.overflow="hidden"})}function h(){p.classList.remove("show"),document.body.style.overflow=""}function se(t){if(!t){console.error("Invalid bookId:",t);return}const e=n.indexOf(t);e===-1?(n.push(t),l.push(T)):(n.splice(e,1),l.splice(e,1)),localStorage.setItem("shoppingList",JSON.stringify(n)),localStorage.setItem("shoppingCard",JSON.stringify(l)),e===-1?(a.innerText="Remove from the shopping list",g.style.display="block"):(a.innerText="Add to shopping list",g.style.display="none")}a.addEventListener("click",()=>{const t=m.dataset.bookId;se(t)});p.addEventListener("click",t=>{t.target===p&&h()});document.addEventListener("keydown",t=>{t.key==="Escape"&&h()});V.bookCollectionWrapper.addEventListener("click",t=>{const e=t.target.closest(".book-link");if(e){t.preventDefault();const o=e.dataset.id;oe(o)}});const I=localStorage.getItem("shoppingList"),E=localStorage.getItem("shoppingCard");I&&(n=JSON.parse(I));E&&(l=JSON.parse(E));ee.addEventListener("click",h);const ne={apiKey:"AIzaSyCLFN6Q9dlDESZj2uPIeJW7lT3Ksj0pS9s",authDomain:"projekt-20ce6.firebaseapp.com",projectId:"projekt-20ce6",storageBucket:"projekt-20ce6.appspot.com",messagingSenderId:"601268600128",appId:"1:601268600128:web:ca6759f1e00ba35bee0ea5",measurementId:"G-YR30C8E3YB"};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("signupBtn");t?t.addEventListener("click",A):console.error('Element with id "signupBtn" not found');const e=document.createElement("div");e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.background="red",e.style.color="white",e.style.padding="15px",e.style.display="none",e.style.zIndex="1",document.body.appendChild(e);const o=R(ne),y=F(o),x=H(o);async function A(){try{const M=await(await fetch("../partials/registration.html")).text(),$=document.getElementById("registrationModalContainer");$.innerHTML=M;const O=document.getElementById("registrationForm"),_=document.querySelector(".close-icon");O.addEventListener("submit",async function(P){P.preventDefault();const N=document.getElementById("name").value,k=document.getElementById("email").value,j=document.getElementById("password").value;try{const c=await J(y,k,j),L={name:N,email:k,uid:c.user.uid};await q(W(x,"users",c.user.uid),L),console.log("User data:",L),f()}catch(c){e.textContent=`Error creating user: ${c.message}`,e.style.display="block",setTimeout(function(){e.style.display="none"},1e4)}}),_.addEventListener("click",function(){e.style.display="none",f()})}catch(r){console.error("Error loading registration content:",r)}}function f(){const r=document.getElementById("registrationModalContainer");r.innerHTML=""}});const u=document.querySelector(".back-to-top");window.addEventListener("scroll",ie);u.addEventListener("click",C);function ie(){const t=window.pageYOffset,e=document.documentElement.clientHeight;t>e?u.classList.add("back-to-top--show"):u.classList.remove("back-to-top--show")}function C(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(C,0))}
//# sourceMappingURL=commonHelpers.js.map
