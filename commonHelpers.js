import{g as w,m as d,a as b,b as z,c as B,d as D}from"./assets/applebooks@2x-32274212.js";import{i as R,g as F,a as H,c as J,s as q,d as W}from"./assets/vendor-67f04ea3.js";const S="https://books-backend.p.goit.global/books",Y={list:"category-list",top:"top-books",category:"category?category="};async function U(e,t=""){try{return await(await fetch(`${S}/${e}${t}`)).json()}catch{alert("An error occurred")}}async function K(e){try{return await(await fetch(`${S}/${e}`)).json()}catch{alert("An error occurred")}}const s={API_OPTIONS:Y,fetchBookList:U,fetchBookById:K},G=document.querySelector(".ctg-list");s.fetchBookList(s.API_OPTIONS.list).then(e=>{const t=e.map(({list_name:o})=>`<li class="ctg-item js-ctg-item " data-ctg-name = ${o}>${o}
          </li>`).join("");G.insertAdjacentHTML("beforeend",t)});const a=w();s.fetchBookList(s.API_OPTIONS.top).then(d.renderTopBooks);function v(e){[...a.ctgList.children].forEach(t=>t.classList.remove("ctg-item-active")),a.ctgList.contains(e.target)?e.target.classList.add("ctg-item-active"):[...a.ctgList.children].find(o=>o.textContent.trim()===e.target.dataset.category).classList.add("ctg-item-active")}function Q(e){const t=e.target.childNodes[0].data;v(e),t!=="All categories"?s.fetchBookList(s.API_OPTIONS.category,t).then(d.renderCategoryBooks):s.fetchBookList(s.API_OPTIONS.top).then(d.renderTopBooks)}function Z(e){if(!e.target.classList.contains("top-books-button"))return;const t=e.target.dataset.category;v(e),s.fetchBookList(s.API_OPTIONS.category,t).then(d.renderCategoryBooks)}a.ctgList.addEventListener("click",Q);a.bookCollectionWrapper.addEventListener("click",Z);const V=w(),p=document.getElementById("bookModal"),m=document.getElementById("bookModalTitle"),X=document.getElementById("bookModalBody"),i=document.getElementById("addToShoppingList"),tt=document.querySelector(".modal-close"),g=document.getElementById("modalFooterText");let n=[],l=[],T={};const et="The Duke of Sussex details his struggles with the royal family, loss of his mother, service in the British Army and marriage to Meghan Markle. Read by the author. 15 hours, 39 minutes unabridged.";function ot(e){s.fetchBookById(e).then(t=>{m.innerText=t.title,t.description||(t.description=et),T={book_image:t.book_image,title:t.title,author:t.author,description:t.description,amazonLinks:t.buy_links[0].url,appleLinks:t.buy_links[1].url},m.dataset.bookId=e,X.innerHTML=`<img src="${t.book_image}" alt="${t.title}" class="book-modal-img"/>
            <div class="book-modal-details">
                <h2 class="book-modal-title">${t.title}</h2>
                <h3 class="book-modal-author">${t.author}</h3>
                <p class="book-modal-desc">${t.description}</p>
                <ul class="icon-book-modal-list">
                    <li>
                        <a href="${t.buy_links[0].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-amazon" srcset="${b} 1x, ${z} 2x" src="${b}" alt="Amazon" loading="lazy"/>
                        </a>
                    </li>
                    <li>
                        <a href="${t.buy_links[1].url}" rel="noopener noreferrer nofollow" target="_blank">
                            <img class="icon-book-modal-ibooks" srcset="${B} 1x, ${D} 2x" src="${B}" alt="Apple books" loading="lazy"/>
                        </a>
                    </li>
                </ul>
            </div>
    `,n.includes(e)?(i.innerText="Remove from the shopping list",g.style.display="block"):(i.innerText="Add to shopping list",g.style.display="none"),p.classList.add("show"),document.body.style.overflow="hidden"})}function y(){p.classList.remove("show"),document.body.style.overflow=""}function st(e){if(!e){console.error("Invalid bookId:",e);return}const t=n.indexOf(e);t===-1?(n.push(e),l.push(T)):(n.splice(t,1),l.splice(t,1)),localStorage.setItem("shoppingList",JSON.stringify(n)),localStorage.setItem("shoppingCard",JSON.stringify(l)),t===-1?(i.innerText="Remove from the shopping list",g.style.display="block"):(i.innerText="Add to shopping list",g.style.display="none")}i.addEventListener("click",()=>{const e=m.dataset.bookId;st(e)});p.addEventListener("click",e=>{e.target===p&&y()});document.addEventListener("keydown",e=>{e.key==="Escape"&&y()});V.bookCollectionWrapper.addEventListener("click",e=>{const t=e.target.closest(".book-link");if(t){e.preventDefault();const o=t.dataset.id;ot(o)}});const I=localStorage.getItem("shoppingList"),E=localStorage.getItem("shoppingCard");I&&(n=JSON.parse(I));E&&(l=JSON.parse(E));tt.addEventListener("click",y);const nt={apiKey:"AIzaSyCLFN6Q9dlDESZj2uPIeJW7lT3Ksj0pS9s",authDomain:"projekt-20ce6.firebaseapp.com",projectId:"projekt-20ce6",storageBucket:"projekt-20ce6.appspot.com",messagingSenderId:"601268600128",appId:"1:601268600128:web:ca6759f1e00ba35bee0ea5",measurementId:"G-YR30C8E3YB"};document.addEventListener("DOMContentLoaded",function(){document.getElementById("signupBtn").addEventListener("click",A);const t=document.createElement("div");t.style.position="fixed",t.style.top="20px",t.style.right="20px",t.style.background="red",t.style.color="white",t.style.padding="15px",t.style.display="none",t.style.zIndex="1",document.body.appendChild(t);const o=R(nt),h=F(o),x=H(o);async function A(){try{const M=await(await fetch("../partials/registration.html")).text(),$=document.getElementById("registrationModalContainer");$.innerHTML=M;const O=document.getElementById("registrationForm"),_=document.querySelector(".close-icon");O.addEventListener("submit",async function(P){P.preventDefault();const N=document.getElementById("name").value,k=document.getElementById("email").value,j=document.getElementById("password").value;try{const c=await J(h,k,j),L={name:N,email:k,uid:c.user.uid};await q(W(x,"users",c.user.uid),L),console.log("User data:",L),f()}catch(c){t.textContent=`Error creating user: ${c.message}`,t.style.display="block",setTimeout(function(){t.style.display="none"},1e4)}}),_.addEventListener("click",function(){t.style.display="none",f()})}catch(r){console.error("Error loading registration content:",r)}}function f(){const r=document.getElementById("registrationModalContainer");r.innerHTML=""}});const u=document.querySelector(".back-to-top");window.addEventListener("scroll",at);u.addEventListener("click",C);function at(){const e=window.pageYOffset,t=document.documentElement.clientHeight;e>t?u.classList.add("back-to-top--show"):u.classList.remove("back-to-top--show")}function C(){window.pageYOffset>0&&(window.scrollBy(0,-25),setTimeout(C,0))}
//# sourceMappingURL=commonHelpers.js.map
