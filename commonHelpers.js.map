{"version":3,"file":"commonHelpers.js","sources":["../src/js/books-api.js","../src/js/category-sidebar.js","../src/js/content-home.js","../src/js/modal-window.js","../src/js/registration.js","../src/js/scroll-up.js"],"sourcesContent":["const BASE_URL = 'https://books-backend.p.goit.global/books';\n\nconst API_OPTIONS = {\n  list: 'category-list',\n  top: 'top-books',\n  category: 'category?category=',\n};\n\nasync function fetchBookList(option, select = '') {\n  try {\n    const response = await fetch(`${BASE_URL}/${option}${select}`);\n    const list = await response.json();\n    // console.log(\n    //   `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    // );\n    return list;\n  } catch (error) {\n    // console.log(`An error occurred: ${error.message}`);\n    alert('An error occurred');\n  }\n}\n\nasync function fetchBookById(bookId) {\n  try {\n    const response = await fetch(`${BASE_URL}/${bookId}`);\n    const book = await response.json();\n    // console.log(\n    //   `data retrieving was succesfull: ${response.status} - ${response.statusText}`\n    // );\n    return book;\n  } catch (error) {\n    // console.log(`An error occurred: ${error.message}`);\n    alert('An error occurred');\n  }\n}\n\nexport default { API_OPTIONS, fetchBookList, fetchBookById };\n","import api from './books-api';\n\nconst ctgList = document.querySelector('.ctg-list');\n\napi.fetchBookList(api.API_OPTIONS.list).then(response => {\n  const markup = response\n    .map(\n      ({\n        list_name,\n      }) => `<li class=\"ctg-item js-ctg-item \" data-ctg-name = ${list_name}>${list_name}\n          </li>`\n    )\n    .join('');\n\n  ctgList.insertAdjacentHTML('beforeend', markup);\n});\n","import api from './books-api';\nimport markup from './markup';\nimport getRefs from './refs';\n\nconst refs = getRefs();\n\napi.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n\nfunction highlightMenuActiveCategory(event) {\n  [...refs.ctgList.children].forEach(li =>\n    li.classList.remove('ctg-item-active')\n  );\n  if (refs.ctgList.contains(event.target)) {\n    event.target.classList.add('ctg-item-active');\n  } else {\n    const match = [...refs.ctgList.children].find(\n      li => li.textContent.trim() === event.target.dataset.category\n    );\n    match.classList.add('ctg-item-active');\n  }\n}\n\nfunction showSelectedCategoryBooks(event) {\n  const selectedCategory = event.target.childNodes[0].data;\n  highlightMenuActiveCategory(event);\n  if (selectedCategory !== 'All categories') {\n    api\n      .fetchBookList(api.API_OPTIONS.category, selectedCategory)\n      .then(markup.renderCategoryBooks);\n  } else {\n    api.fetchBookList(api.API_OPTIONS.top).then(markup.renderTopBooks);\n  }\n}\n\nfunction showMoreCategoryBooks(event) {\n  if (!event.target.classList.contains('top-books-button')) {\n    return;\n  }\n  const category = event.target.dataset.category;\n  highlightMenuActiveCategory(event);\n  api\n    .fetchBookList(api.API_OPTIONS.category, category)\n    .then(markup.renderCategoryBooks);\n}\n\nrefs.ctgList.addEventListener('click', showSelectedCategoryBooks);\nrefs.bookCollectionWrapper.addEventListener('click', showMoreCategoryBooks);\n","import getRefs from './refs';\nimport api from './books-api';\n// import markup from './markup';\nimport amazon from '../images/modal-window/amazon.png';\nimport amazon2x from '../images/modal-window/amazon@2x.png';\nimport applebooks from '../images/modal-window/applebooks.png';\nimport applebooks2x from '../images/modal-window/applebooks@2x.png';\n\nconst refs = getRefs();\nconst modal = document.getElementById('bookModal');\nconst modalTitle = document.getElementById('bookModalTitle');\nconst modalBody = document.getElementById('bookModalBody');\nconst addToShoppingListBtn = document.getElementById('addToShoppingList');\nconst modalCloseBtn = document.querySelector('.modal-close');\n// const modalCloseFooterBtn = document.querySelector('.btn-secondary');\nconst addTextModalFooter = document.getElementById('modalFooterText');\n\nlet shoppingList = [];\nlet shoppingCard = [];\nlet firstCard = {};\nconst descEmpty = 'The Duke of Sussex details his struggles with the royal family, loss of his mother, service in the British Army and marriage to Meghan Markle. Read by the author. 15 hours, 39 minutes unabridged.';\nfunction openModal(bookId) {\n  api.fetchBookById(bookId).then(book => {\n    modalTitle.innerText = book.title;\n    if(!book.description){\n      book.description=descEmpty;\n    }\n    firstCard = {\n      book_image: book.book_image,\n      title: book.title,\n      author: book.author,\n      description: book.description,\n      amazonLinks: book.buy_links[0].url,\n      appleLinks: book.buy_links[1].url,\n    };\n    modalTitle.dataset.bookId = bookId; // Додати dataset для збереження bookId\n    modalBody.innerHTML = `<img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"book-modal-img\"/>\n            <div class=\"book-modal-details\">\n                <h2 class=\"book-modal-title\">${book.title}</h2>\n                <h3 class=\"book-modal-author\">${book.author}</h3>\n                <p class=\"book-modal-desc\">${book.description}</p>\n                <ul class=\"icon-book-modal-list\">\n                    <li>\n                        <a href=\"${book.buy_links[0].url}\" rel=\"noopener noreferrer nofollow\" target=\"_blank\">\n                            <img class=\"icon-book-modal-amazon\" srcset=\"${amazon} 1x, ${amazon2x} 2x\" src=\"${amazon}\" alt=\"Amazon\" loading=\"lazy\"/>\n                        </a>\n                    </li>\n                    <li>\n                        <a href=\"${book.buy_links[1].url}\" rel=\"noopener noreferrer nofollow\" target=\"_blank\">\n                            <img class=\"icon-book-modal-ibooks\" srcset=\"${applebooks} 1x, ${applebooks2x} 2x\" src=\"${applebooks}\" alt=\"Apple books\" loading=\"lazy\"/>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n    `;\n    \n    // Перевірити, чи книга вже є в списку покупок\n    if (shoppingList.includes(bookId)) {\n      addToShoppingListBtn.innerText = 'Remove from the shopping list';\n      addTextModalFooter.style.display = 'block';\n    } else {\n      addToShoppingListBtn.innerText = 'Add to shopping list';\n      addTextModalFooter.style.display = 'none';\n    }\n\n    modal.classList.add('show');\n    document.body.style.overflow = 'hidden'; // Вимкнути прокручування, коли відкрито вікно\n  });\n}\n\nfunction closeModal() {\n  modal.classList.remove('show');\n  document.body.style.overflow = ''; // Увімкнути прокручування, коли вікно закрито\n}\n\nfunction toggleShoppingList(bookId) {\n  // console.log('Toggling shopping list for bookId:', bookId);\n\n  if (!bookId) {\n    console.error('Invalid bookId:', bookId);\n    return;\n  }\n\n  const index = shoppingList.indexOf(bookId);\n  if (index === -1) {\n    shoppingList.push(bookId);\n    shoppingCard.push(firstCard);\n  } else {\n    shoppingList.splice(index, 1);\n    shoppingCard.splice(index,1);\n  }\n\n  // console.log('Updated shoppingList:', shoppingList);\n\n  localStorage.setItem('shoppingList', JSON.stringify(shoppingList));\n  localStorage.setItem('shoppingCard',JSON.stringify(shoppingCard));\n\n\n  if (index === -1) {\n    addToShoppingListBtn.innerText = 'Remove from the shopping list';\n    addTextModalFooter.style.display = 'block';\n  } else {\n    addToShoppingListBtn.innerText = 'Add to shopping list';\n    addTextModalFooter.style.display = 'none';\n  }\n}\n\naddToShoppingListBtn.addEventListener('click', () => {\n  const currentBookId = modalTitle.dataset.bookId; // Отримання bookId з dataset\n  toggleShoppingList(currentBookId);\n});\n\nmodal.addEventListener('click', event => {\n  if (event.target === modal) {\n    closeModal();\n  }\n});\n\ndocument.addEventListener('keydown', event => {\n  if (event.key === 'Escape') {\n    closeModal();\n  }\n});\n\nrefs.bookCollectionWrapper.addEventListener('click', event => {\n  const bookLink = event.target.closest('.book-link');\n  if (bookLink) {\n    event.preventDefault();\n    const bookId = bookLink.dataset.id;\n\n    // Виклик функції openModal для відображення модального вікна\n    openModal(bookId);\n  }\n});\n\n// Отримати список покупок із локального сховища\nconst savedShoppingList = localStorage.getItem('shoppingList');\nconst savedShoppingCard = localStorage.getItem('shoppingCard'); \nif (savedShoppingList) {\n  shoppingList = JSON.parse(savedShoppingList);\n}\nif (savedShoppingCard) {\n  shoppingCard = JSON.parse(savedShoppingCard);\n}\n\nmodalCloseBtn.addEventListener('click', closeModal);\n// modalCloseFooterBtn.addEventListener('click', closeModal);","document.addEventListener('DOMContentLoaded', function () {\n  const signupBtn = document.getElementById('signupBtn');\n  signupBtn.addEventListener('click', openRegistrationModal);\n\n  function openRegistrationModal() {\n    // Fetch the content of registration.html\n    fetch('./partials/registration.html')\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`Network response was not ok: ${response.status}`);\n        }\n        return response.text();\n      })\n      .then(htmlContent => {\n        // Inject the HTML content into the DOM\n        const modalContainer = document.createElement('div');\n        modalContainer.innerHTML = htmlContent;\n\n        // Append the modal container to the body or another desired location\n        document.body.appendChild(modalContainer);\n\n        // Now, you can add additional logic to handle the opened modal\n        console.log('Модальное окно регистрации открыто!');\n      })\n      .catch(error => {\n        console.error('Error fetching registration.html:', error);\n      });\n  }\n});\n","const goTopBtn = document.querySelector(\".back-to-top\");\n\nwindow.addEventListener(\"scroll\", trackScroll);\ngoTopBtn.addEventListener(\"click\", goTop);\n\nfunction trackScroll() {\n\n  const scrolled = window.pageYOffset;\n  const coords = document.documentElement.clientHeight;\n\n  if (scrolled > coords) {\n    goTopBtn.classList.add(\"back-to-top--show\");\n  } else {\n    goTopBtn.classList.remove(\"back-to-top--show\");\n  }\n}\n\nfunction goTop() {\n\n  if (window.pageYOffset > 0) {\n    window.scrollBy(0, -25);\n    setTimeout(goTop, 0); \n  }\n}"],"names":["BASE_URL","API_OPTIONS","fetchBookList","option","select","fetchBookById","bookId","api","ctgList","response","markup","list_name","refs","getRefs","highlightMenuActiveCategory","event","li","showSelectedCategoryBooks","selectedCategory","showMoreCategoryBooks","category","modal","modalTitle","modalBody","addToShoppingListBtn","modalCloseBtn","addTextModalFooter","shoppingList","shoppingCard","firstCard","descEmpty","openModal","book","amazon","amazon2x","applebooks","applebooks2x","closeModal","toggleShoppingList","index","currentBookId","bookLink","savedShoppingList","savedShoppingCard","openRegistrationModal","htmlContent","modalContainer","error","goTopBtn","trackScroll","goTop","scrolled","coords"],"mappings":"0FAAA,MAAMA,EAAW,4CAEXC,EAAc,CAClB,KAAM,gBACN,IAAK,YACL,SAAU,oBACZ,EAEA,eAAeC,EAAcC,EAAQC,EAAS,GAAI,CAChD,GAAI,CAMF,OAJa,MADI,MAAM,MAAM,GAAGJ,KAAYG,IAASC,GAAQ,GACjC,MAK7B,MAAC,CAEA,MAAM,mBAAmB,CAC1B,CACH,CAEA,eAAeC,EAAcC,EAAQ,CACnC,GAAI,CAMF,OAJa,MADI,MAAM,MAAM,GAAGN,KAAYM,GAAQ,GACxB,MAK7B,MAAC,CAEA,MAAM,mBAAmB,CAC1B,CACH,CAEA,MAAAC,EAAe,CAAE,YAAAN,EAAa,cAAAC,EAAe,cAAAG,CAAe,EClCtDG,EAAU,SAAS,cAAc,WAAW,EAElDD,EAAI,cAAcA,EAAI,YAAY,IAAI,EAAE,KAAKE,GAAY,CACvD,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,UAAAE,CACD,IAAK,qDAAqDA,KAAaA;AAAA,gBAEzE,EACA,KAAK,EAAE,EAEVH,EAAQ,mBAAmB,YAAaE,CAAM,CAChD,CAAC,ECXD,MAAME,EAAOC,EAAO,EAEpBN,EAAI,cAAcA,EAAI,YAAY,GAAG,EAAE,KAAKG,EAAO,cAAc,EAEjE,SAASI,EAA4BC,EAAO,CAC1C,CAAC,GAAGH,EAAK,QAAQ,QAAQ,EAAE,QAAQI,GACjCA,EAAG,UAAU,OAAO,iBAAiB,CACzC,EACMJ,EAAK,QAAQ,SAASG,EAAM,MAAM,EACpCA,EAAM,OAAO,UAAU,IAAI,iBAAiB,EAE9B,CAAC,GAAGH,EAAK,QAAQ,QAAQ,EAAE,KACvCI,GAAMA,EAAG,YAAY,KAAM,IAAKD,EAAM,OAAO,QAAQ,QAC3D,EACU,UAAU,IAAI,iBAAiB,CAEzC,CAEA,SAASE,EAA0BF,EAAO,CACxC,MAAMG,EAAmBH,EAAM,OAAO,WAAW,GAAG,KACpDD,EAA4BC,CAAK,EAC7BG,IAAqB,iBACvBX,EACG,cAAcA,EAAI,YAAY,SAAUW,CAAgB,EACxD,KAAKR,EAAO,mBAAmB,EAElCH,EAAI,cAAcA,EAAI,YAAY,GAAG,EAAE,KAAKG,EAAO,cAAc,CAErE,CAEA,SAASS,EAAsBJ,EAAO,CACpC,GAAI,CAACA,EAAM,OAAO,UAAU,SAAS,kBAAkB,EACrD,OAEF,MAAMK,EAAWL,EAAM,OAAO,QAAQ,SACtCD,EAA4BC,CAAK,EACjCR,EACG,cAAcA,EAAI,YAAY,SAAUa,CAAQ,EAChD,KAAKV,EAAO,mBAAmB,CACpC,CAEAE,EAAK,QAAQ,iBAAiB,QAASK,CAAyB,EAChEL,EAAK,sBAAsB,iBAAiB,QAASO,CAAqB,ECtC1E,MAAMP,EAAOC,EAAO,EACdQ,EAAQ,SAAS,eAAe,WAAW,EAC3CC,EAAa,SAAS,eAAe,gBAAgB,EACrDC,EAAY,SAAS,eAAe,eAAe,EACnDC,EAAuB,SAAS,eAAe,mBAAmB,EAClEC,EAAgB,SAAS,cAAc,cAAc,EAErDC,EAAqB,SAAS,eAAe,iBAAiB,EAEpE,IAAIC,EAAe,CAAA,EACfC,EAAe,CAAA,EACfC,EAAY,CAAA,EAChB,MAAMC,EAAY,sMAClB,SAASC,EAAUzB,EAAQ,CACzBC,EAAI,cAAcD,CAAM,EAAE,KAAK0B,GAAQ,CACrCV,EAAW,UAAYU,EAAK,MACxBA,EAAK,cACPA,EAAK,YAAYF,GAEnBD,EAAY,CACV,WAAYG,EAAK,WACjB,MAAOA,EAAK,MACZ,OAAQA,EAAK,OACb,YAAaA,EAAK,YAClB,YAAaA,EAAK,UAAU,GAAG,IAC/B,WAAYA,EAAK,UAAU,GAAG,GACpC,EACIV,EAAW,QAAQ,OAAShB,EAC5BiB,EAAU,UAAY,aAAaS,EAAK,oBAAoBA,EAAK;AAAA;AAAA,+CAEtBA,EAAK;AAAA,gDACJA,EAAK;AAAA,6CACRA,EAAK;AAAA;AAAA;AAAA,mCAGfA,EAAK,UAAU,GAAG;AAAA,0EACqBC,SAAcC,cAAqBD;AAAA;AAAA;AAAA;AAAA,mCAI1ED,EAAK,UAAU,GAAG;AAAA,0EACqBG,SAAkBC,cAAyBD;AAAA;AAAA;AAAA;AAAA;AAAA,MAQ7GR,EAAa,SAASrB,CAAM,GAC9BkB,EAAqB,UAAY,gCACjCE,EAAmB,MAAM,QAAU,UAEnCF,EAAqB,UAAY,uBACjCE,EAAmB,MAAM,QAAU,QAGrCL,EAAM,UAAU,IAAI,MAAM,EAC1B,SAAS,KAAK,MAAM,SAAW,QACnC,CAAG,CACH,CAEA,SAASgB,GAAa,CACpBhB,EAAM,UAAU,OAAO,MAAM,EAC7B,SAAS,KAAK,MAAM,SAAW,EACjC,CAEA,SAASiB,EAAmBhC,EAAQ,CAGlC,GAAI,CAACA,EAAQ,CACX,QAAQ,MAAM,kBAAmBA,CAAM,EACvC,MACD,CAED,MAAMiC,EAAQZ,EAAa,QAAQrB,CAAM,EACrCiC,IAAU,IACZZ,EAAa,KAAKrB,CAAM,EACxBsB,EAAa,KAAKC,CAAS,IAE3BF,EAAa,OAAOY,EAAO,CAAC,EAC5BX,EAAa,OAAOW,EAAM,CAAC,GAK7B,aAAa,QAAQ,eAAgB,KAAK,UAAUZ,CAAY,CAAC,EACjE,aAAa,QAAQ,eAAe,KAAK,UAAUC,CAAY,CAAC,EAG5DW,IAAU,IACZf,EAAqB,UAAY,gCACjCE,EAAmB,MAAM,QAAU,UAEnCF,EAAqB,UAAY,uBACjCE,EAAmB,MAAM,QAAU,OAEvC,CAEAF,EAAqB,iBAAiB,QAAS,IAAM,CACnD,MAAMgB,EAAgBlB,EAAW,QAAQ,OACzCgB,EAAmBE,CAAa,CAClC,CAAC,EAEDnB,EAAM,iBAAiB,QAASN,GAAS,CACnCA,EAAM,SAAWM,GACnBgB,GAEJ,CAAC,EAED,SAAS,iBAAiB,UAAWtB,GAAS,CACxCA,EAAM,MAAQ,UAChBsB,GAEJ,CAAC,EAEDzB,EAAK,sBAAsB,iBAAiB,QAASG,GAAS,CAC5D,MAAM0B,EAAW1B,EAAM,OAAO,QAAQ,YAAY,EAClD,GAAI0B,EAAU,CACZ1B,EAAM,eAAc,EACpB,MAAMT,EAASmC,EAAS,QAAQ,GAGhCV,EAAUzB,CAAM,CACjB,CACH,CAAC,EAGD,MAAMoC,EAAoB,aAAa,QAAQ,cAAc,EACvDC,EAAoB,aAAa,QAAQ,cAAc,EACzDD,IACFf,EAAe,KAAK,MAAMe,CAAiB,GAEzCC,IACFf,EAAe,KAAK,MAAMe,CAAiB,GAG7ClB,EAAc,iBAAiB,QAASY,CAAU,ECjJlD,SAAS,iBAAiB,mBAAoB,UAAY,CACtC,SAAS,eAAe,WAAW,EAC3C,iBAAiB,QAASO,CAAqB,EAEzD,SAASA,GAAwB,CAE/B,MAAM,8BAA8B,EACjC,KAAKnC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAM,gCAAgCA,EAAS,QAAQ,EAEnE,OAAOA,EAAS,MACxB,CAAO,EACA,KAAKoC,GAAe,CAEnB,MAAMC,EAAiB,SAAS,cAAc,KAAK,EACnDA,EAAe,UAAYD,EAG3B,SAAS,KAAK,YAAYC,CAAc,EAGxC,QAAQ,IAAI,qCAAqC,CACzD,CAAO,EACA,MAAMC,GAAS,CACd,QAAQ,MAAM,oCAAqCA,CAAK,CAChE,CAAO,CACJ,CACH,CAAC,EC5BD,MAAMC,EAAW,SAAS,cAAc,cAAc,EAEtD,OAAO,iBAAiB,SAAUC,CAAW,EAC7CD,EAAS,iBAAiB,QAASE,CAAK,EAExC,SAASD,GAAc,CAErB,MAAME,EAAW,OAAO,YAClBC,EAAS,SAAS,gBAAgB,aAEpCD,EAAWC,EACbJ,EAAS,UAAU,IAAI,mBAAmB,EAE1CA,EAAS,UAAU,OAAO,mBAAmB,CAEjD,CAEA,SAASE,GAAQ,CAEX,OAAO,YAAc,IACvB,OAAO,SAAS,EAAG,GAAG,EACtB,WAAWA,EAAO,CAAC,EAEvB"}